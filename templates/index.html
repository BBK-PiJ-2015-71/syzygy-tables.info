{%extends "layout.html" %}

{%block leftside %}
  <h1>Syzygy endgame tablebases</h1>

  <div class="btn-group" role="group" aria-label="Side to move">
    <a id="btn-white" class="btn btn-default{% if turn == "white" %} active{% endif %}" href="/?fen={{ white_fen }}">White to move</a>
    <a id="btn-black" class="btn btn-default{% if turn == "black" %} active{% endif %}" href="/?fen={{ black_fen }}">Black to move</a>
  </div>

  <div id="board" data-fen="{{ fen }}">
    <noscript>JavaScript required for interactive board view.</noscript>
  </div>

  <form id="form-set-fen" action="/" method="get">
    <div class="input-group">
      <input id="fen" type="text" name="fen" value="{{ fen_input }}" class="form-control" aria-label="FEN" placeholder="{{ DEFAULT_FEN }}">
      <span class="input-group-btn">
        <input id="btn-set-fen" type="submit" class="btn btn-default" value="Set FEN">
      </span>
    </div>
  </form>
{%endblock %}

{%block rightside %}
  <h2 class="{{ winning_side }}-win">{{ status }}</h2>

  <div id="info">
    {% if fen == DEFAULT_FEN %}
      <p>Syzygy tablebases provide win-draw-loss and distance-to-zero information
        for all endgame positions with up to 6 pieces.</p>
      <p>Minmaximg the DTZ values guarantees winning all winning positions and
        defending all drawn positions.</p>
      <p><strong>Setup a position on the board to probe the tablebases.</strong></p>
    {% elif illegal %}
      <p>The given position is not a legal chess position.</p>
    {% elif insufficient_material %}
      <p><strong>The game is drawn</strong> because with the remaining
        material no sequence of legal moves can lead to a checkmate.</p>
    {% elif not_yet_solved %}
      <p><a href="https://en.wikipedia.org/wiki/Solving_chess">Chess is not
        yet solved.</a></p>
    {% elif unknown %}
      <p>Syzygy tables only provide information for positions with up to 6 pieces and
        no castling rights.</p>
    {% elif blessed_loss %}
      <p><strong>This is a blessed loss.</strong> Mate can be forced, but a
        draw can be achieved under the fifty-move rule.</p>
    {% elif cursed_win %}
      <p><strong>This is a cursed win.</strong> Mate can be forced, but a
        draw can be achieved under the fifty-move rule.</p>
    {% endif %}
  </div>

  <div id="winning" class="list-group {{ turn }}-turn">
    {% for move in winning_moves %}
      <a class="list-group-item" href="/?fen={{ move.fen }}" data-uci="{{ move.uci }}">{{ move.san }} <span class="badge">{{ move.badge }}</span></a>
    {% endfor %}
  </div>

  <div id="drawing" class="list-group">
    {% for move in drawing_moves %}
      <a class="list-group-item" href="/?fen={{ move.fen }}" data-uci="{{ move.uci }}">{{ move.san }} <span class="badge">{{ move.badge }}</span></a>
    {% endfor %}
  </div>

  <div id="losing" class="list-group {{ turn }}-turn">
    {% for move in losing_moves %}
      <a class="list-group-item" href="/?fen={{ move.fen }}" data-uci="{{ move.uci }}">{{ move.san }} <span class="badge">{{ move.badge }}</span></a>
    {% endfor %}
  </div>
{%endblock %}
